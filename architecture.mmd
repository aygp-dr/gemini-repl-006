graph TB
    subgraph "Core Components"
        REPL[REPL Event Loop]
        CTX[Context Manager]
        LOG[Logger]
        API[Gemini API Client]
        TOOLS[Tool System]
    end
    
    subgraph "Tool Functions"
        READ[File Reader]
        WRITE[File Writer]
        SELF[Self-Modify]
        EXEC[Shell Exec]
    end
    
    subgraph "Storage"
        HIST[conversation.edn]
        LOGS[logs/gemini.log]
        FIFO[logs/gemini.fifo]
        FILES[workspace/]
    end
    
    REPL --> CTX
    REPL --> LOG
    REPL --> API
    REPL --> TOOLS
    
    TOOLS --> READ
    TOOLS --> WRITE
    TOOLS --> SELF
    TOOLS --> EXEC
    
    CTX --> HIST
    LOG --> LOGS
    LOG --> FIFO
    READ --> FILES
    WRITE --> FILES
    SELF --> FILES
    
    API --> |HTTP| Gemini[Gemini API]
    Gemini --> |JSON| API
